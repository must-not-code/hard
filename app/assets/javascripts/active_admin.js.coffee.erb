#= require active_admin/base
#= require tinymce

$(document).ready ->
  tinyMCE.init
    menubar: false
    toolbar: 'undo redo | bold italic underline strikethrough forecolor | alignleft aligncenter alignright alignjustify | bullist numlist | link uploadimage media | code'
    selector: '.text textarea'
    height: 400
    convert_urls: false
    valid_elements: '*[*]'
    plugins: 'link, image, code, media, uploadimage, textcolor'
    content_css: "<%= asset_path('application.css')%>"
    uploadimage_form_url: '/post_attachments'

  readURL = (input) ->
    if input.files and input.files[0]
      reader = new FileReader
      reader.onload = (e) ->
        $(input).siblings('p').children('img').attr('src', e.target.result)
      reader.readAsDataURL input.files[0]

  $('.file input').change ->
    readURL this
